# Spring Boot Code Generator Maven Plugin

A Maven plugin that generates Spring Boot boilerplate code from YAML configuration files.

## Features

This plugin generates the following components:
- Liquibase migration SQL files
- JPA Entity classes
- Repository interfaces
- Service interfaces and implementations
- REST Controllers
- Unit tests for controllers, services, and repositories

## Configuration

Create a YAML configuration file (default: `src/main/resources/codegen.yaml`) with the following structure:

```yaml
packageName: com.example.demo
entityName: User
idFields:
  - id
fields:
  - name: id
    type: Long
    nullable: false
  - name: username
    type: String
    nullable: false
    length: 50
  - name: email
    type: String
    nullable: false
    length: 100
  - name: firstName
    type: String
    nullable: true
    length: 50
  - name: lastName
    type: String
    nullable: true
    length: 50
  - name: createdAt
    type: LocalDateTime
    nullable: false
  - name: updatedAt
    type: LocalDateTime
    nullable: true

sqlFileContent: |
  --liquibase formatted sql

  --changeset author:1
  CREATE TABLE user (
      id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
      username VARCHAR(50) NOT NULL UNIQUE,
      email VARCHAR(100) NOT NULL UNIQUE,
      first_name VARCHAR(50),
      last_name VARCHAR(50),
      created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP
  );

  --rollback DROP TABLE user;
```

## Usage

### Add to your project's pom.xml

```xml
<build>
    <plugins>
        <plugin>
            <groupId>com.example</groupId>
            <artifactId>spring-boot-code-generator</artifactId>
            <version>1.0.0-SNAPSHOT</version>
            <executions>
                <execution>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <configFile>src/main/resources/codegen.yaml</configFile>
            </configuration>
        </plugin>
    </plugins>
</build>
```

### Run the plugin

```bash
mvn com.example:spring-boot-code-generator:generate
```

Or if added to your project's build lifecycle:

```bash
mvn generate-sources
```

## Plugin Parameters

| Parameter | Default Value | Description |
|-----------|---------------|-------------|
| `configFile` | `src/main/resources/codegen.yaml` | Path to the YAML configuration file |
| `outputDirectory` | `${project.build.directory}/generated-sources/java` | Output directory for generated Java sources |
| `testOutputDirectory` | `${project.build.directory}/generated-test-sources/java` | Output directory for generated test sources |
| `resourceOutputDirectory` | `${project.build.directory}/generated-resources` | Output directory for generated resources (SQL files) |
| `skipCodeGen` | `false` | Skip code generation |

## Generated Files

For an entity named `User` with package `com.example.demo`, the plugin generates:

### Main Sources
- `com/example/demo/User.java` - JPA Entity
- `com/example/demo/UserRepository.java` - Spring Data JPA Repository
- `com/example/demo/UserService.java` - Service interface
- `com/example/demo/UserServiceImpl.java` - Service implementation
- `com/example/demo/UserController.java` - REST Controller

### Test Sources
- `com/example/demo/UserControllerTest.java` - Controller unit tests
- `com/example/demo/UserServiceTest.java` - Service unit tests
- `com/example/demo/UserRepositoryTest.java` - Repository unit tests

### Resources
- `db/migration/V1__Create_user_table.sql` - Liquibase migration file

## Building the Plugin

To build and install the plugin locally:

```bash
mvn clean install
```

## Testing

Run the tests:

```bash
mvn test
```

## Configuration Schema

### Root Properties
- `packageName` (required): Base package name for generated classes
- `entityName` (required): Name of the entity class
- `idFields` (optional): List of field names that represent the primary key
- `fields` (required): List of entity fields
- `sqlFileContent` (optional): SQL content for Liquibase migration

### Field Properties
- `name` (required): Field name
- `type` (required): Java type (String, Long, Integer, LocalDateTime, etc.)
- `nullable` (optional, default: true): Whether the field can be null
- `length` (optional): For String fields, the maximum length
- `defaultValue` (optional): Default value for the field

## Supported Java Types

The plugin supports common Java types including:
- String
- Long, Integer, Short, Byte
- Double, Float, BigDecimal
- Boolean
- LocalDate, LocalDateTime, LocalTime
- UUID

## Requirements

- Java 17 or higher
- Maven 3.8.1 or higher
